(()=>{"use strict";var e={538:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(o(147));t.default=class{constructor(e){this.nombre=e,this.listado=[],this.cantidad=0}getAll(){let e;try{e=s.default.readFileSync(this.nombre,"utf-8")||"[]";let t=JSON.parse(e)||[];return this.listado=t,this.cantidad=this.listado[this.listado.length-1].id,t}catch(e){console.log("El archivo no existe o se encuentra vacio")}}saveModificado(){try{s.default.writeFileSync(this.nombre,JSON.stringify(this.listado))}catch(e){console.log("No se pudo guardar el archivo")}}save(e,t,o){try{this.getAll(),this.cantidad++,this.listado.push({nombre:e,precio:t,thumbnail:o,id:this.cantidad}),s.default.writeFileSync(this.nombre,JSON.stringify(this.listado))}catch(e){console.log("No se pudo guardar el archivo")}}getByID(e){try{this.getAll();for(let t=0;t<this.listado.length;t++)if(this.listado[t].id==e)return console.log(this.listado[t]),t}catch(e){console.log("No se pudo leer el archivo")}}deleteByID(e){try{this.getAll();let t=-1;for(let o=0;o<this.listado.length;o++)this.listado[o].id==e&&(t=o);return-1==t?(console.log("No se encuentra el indice"),!1):(this.listado.splice(t,1),s.default.writeFileSync(this.nombre,JSON.stringify(this.listado)),console.log("Elemento borrado"),!0)}catch(e){console.log("No se pudo modificar el archivo")}}deleteAll(){try{this.listado=[],this.cantidad=0,s.default.writeFileSync(this.nombre,JSON.stringify(this.listado)),console.log("El contenido del archivo ha sido eliminado")}catch(e){console.log("No se pudo modificar el archivo")}}}},607:function(e,t,o){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(o(860)),l=new(i(o(538)).default)("listado.txt");l.getAll(),console.log(l.listado),l.deleteAll(),console.log(l.listado),l.save("Producto 1",100,"www.1.com"),l.save("Producto 2",100,"www.2.com"),l.save("Producto 3",100,"www.3.com"),l.save("Producto 4",100,"www.4.com"),console.log(l.listado),l.deleteByID(3),l.getAll(),console.log(l.listado);const r=(0,s.default)(),a=s.default.Router(),d=o(685).createServer(r),c=(o(952)(d),process.env.PORT||8080);d.listen(c,(()=>{console.log("Servidor Encendido")})),d.on("error",(e=>{console.log("Error en servidor")})),r.use(s.default.json()),r.use(s.default.urlencoded({extended:!0})),r.use(s.default.static("public")),r.use("/api/productos",a),r.get("/",((e,t)=>{t.json(l.listado)}))},860:e=>{e.exports=require("express")},952:e=>{e.exports=require("socket.io")},147:e=>{e.exports=require("fs")},685:e=>{e.exports=require("http")}},t={};!function o(i){var s=t[i];if(void 0!==s)return s.exports;var l=t[i]={exports:{}};return e[i].call(l.exports,l,l.exports,o),l.exports}(607)})();